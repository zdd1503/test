<!DOCTYPE html>
<html>

<head>
  <meta charset=" utf-8">

  <title>气泡动画</title>
  <script>  
    window.onload = function () {
      function Circle() {
        this.x = Math.random() * canvas.width;
        this.y = canvas.height;
        this.r = Math.random() * 15;
        //绘制圆形
        this.paint = function () {
          context.beginPath();
          context.arc(this.x, this.y, this.r, 0, Math.PI * 2);
          context.fillStyle = "white";
          context.globalAlpha = 0.5;
          context.fill();
        }
        //控制圆形移动
        this.step = function () {
          this.y--;
        }
      }
      var circles = [];
      /*创建圆*/
      function createCircles() {
        var circle = new Circle();
        circles[circles.length] = circle;
      }
      /*调用画圆方法*/
      function paintCircles() {
        for (var i = 0; i < circles.length; i++) {
          circles[i].paint();
        }
      }
      /*调用气泡上升方法*/
      function stepCircles() {
        for (var i = 0; i < circles.length; i++) {
          circles[i].step();
        }
      }
      var canvas = document.getElementById("canvas");
      var context = canvas.getContext("2d");
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
      var myimg = new Image();
      myimg.src = "./3.jpg";
      var timer = "";
      setInterval(function () {
        context.drawImage(myimg, 0, 0);
        timer++;
        if (timer % 20 == 0) {
          createCircles();
        }
        paintCircles();
        stepCircles();
      }, 10);
    }
  </script>
</head>

<body>
  <div id="d1">
    <canvas id="canvas"></canvas>
  </div>
</body>

</html>